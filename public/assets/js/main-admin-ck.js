function handleDragStart(e){this.classList.add("dragging");dragSrcEl=this;e.dataTransfer.effectAllowed="move";e.dataTransfer.setData("text/html",this.innerHTML)}function handleDragOver(e){e.preventDefault&&e.preventDefault();e.dataTransfer.dropEffect="move";return!1}function handleDragEnter(e){this.classList.add("drag-over")}function handleDragLeave(e){this.classList.remove("drag-over")}function handleDrop(e){e.stopPropagation&&e.stopPropagation();if(dragSrcEl!=this){dragSrcEl.innerHTML=this.innerHTML;this.innerHTML=e.dataTransfer.getData("text/html");[].forEach.call(cols,function(e){e.classList.remove("drag-over");e.classList.remove("dragging");var n=t(e),r=e.getElementsByClassName("sort-order")[0];r.value=n});function t(e){var t=e.parentNode.parentNode.getElementsByTagName("li"),n=t.length,r;for(var i=0;i<n;i++)if(t[i]==e){r=i;return r+1}}button.classList.remove("inactive");button.classList.add("active")}return!1}function handleDragEnd(e){[].forEach.call(cols,function(e){e.classList.remove("drag-over");e.classList.remove("dragging")})}$(function(){$(".date-select").datepicker({format:"yyyy-mm-dd"});$("form[data-confirm]").submit(function(){if(!confirm($(this).attr("data-confirm")))return!1});$(".move-up").on("click",function(){var e=$(this).closest(".draggable"),t=e.prev(),n=e.find(".sort-order"),r=parseInt(n.val()),i=e.prev().find(".sort-order"),s=parseInt(i.val());e.insertBefore(t).fadeIn();r!=1&&n.val(r-1);i.val(s+1);$(".button").removeClass("inactive").addClass("active")});$(".move-down").on("click",function(){var e=$(this).closest(".draggable"),t=e.next(),n=e.find(".sort-order"),r=parseInt(n.val()),i=e.next().find(".sort-order"),s=parseInt(i.val());e.insertAfter(t).fadeIn(300);n.val(r+1);i.val(s-1);$(".button").removeClass("inactive").addClass("active")})});var dragSrcEl=null,button=document.getElementById("submit"),cols=document.querySelectorAll(".draggable");[].forEach.call(cols,function(e){e.addEventListener("dragstart",handleDragStart,!1);e.addEventListener("dragenter",handleDragEnter,!1);e.addEventListener("dragover",handleDragOver,!1);e.addEventListener("dragleave",handleDragLeave,!1);e.addEventListener("dragend",handleDragEnd,!1);e.addEventListener("drop",handleDrop,!1)});